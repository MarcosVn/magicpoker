<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title> Color Fling! </title>
  <link href="stylesheets/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
  <link rel="stylesheet" type="text/css" href="stylesheets/deck.css">

  <script src="js/sense.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      padding: 0;
      margin: 0;
    }
    .option {
      display: inline-block;
      height: 80px;
      width: 20%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div class="option"></div><div class="option"></div><div class="option"></div><div class="option"></div><div class="option"></div>


  <div class="card" style="margin-left: 50px;">
        <div class="front red">
          <div class="index">9<br />&hearts;</div>

          <div class="spotA1">&hearts;</div>
          <div class="spotA2">&hearts;</div>
          <div class="spotA4">&hearts;</div>
          <div class="spotA5">&hearts;</div>

          <div class="spotB3">&hearts;</div>
  
          <div class="spotC1">&hearts;</div>
          <div class="spotC2">&hearts;</div>
          <div class="spotC4">&hearts;</div>
          <div class="spotC5">&hearts;</div>
        </div>
    </div>



    <div class="card" style="margin-left: 250px;">
        <div class="front red">
          <div class="index">9<br />&hearts;</div>

          <div class="spotA1">&hearts;</div>
          <div class="spotA2">&hearts;</div>
          <div class="spotA4">&hearts;</div>
          <div class="spotA5">&hearts;</div>

          <div class="spotB3">&hearts;</div>
  
          <div class="spotC1">&hearts;</div>
          <div class="spotC2">&hearts;</div>
          <div class="spotC4">&hearts;</div>
          <div class="spotC5">&hearts;</div>
        </div>
    </div>

    <div id="rec" style="margin-left: 500px">
    </div>


</body>
<script>
    var sense = sense.init();
    var socket = io();
    // var deck = [
    //   "#33B5E5",
    //   "#AA66CC",
    //   "#99CC00",
    //   "#FFBB33",
    //   "#FF4444"
    // ];

    var cards = $('.card');
    console.log(cards[0]);
    var rec = $('#rec').hide();

    var deck = [
      "card 1",
      "card 2",
      "card 3",
      "card 4",
      "card 5"
    ];

    var selectedCard;



    /* Detecta o movimento de flick (chicotada) e faz o broadcast da cor selcionada */
    sense.flick(function(data){
      broadcast();
    });

    // $(document).ready(function(){
    //   $('.option').each(function(i, element){
    //     $(element)
    //         .css({"background": deck[i]})
    //         .click(function(){
    //           $('body').css({"background": deck[i]});
    //           selectedCard = deck[i]
    //         })
    //     })
    // });


    // $(document).ready(function () {
    //   $('.option').each(function(i, element) {
    //     $(element)
    //       .css({"border-style": "solid"})
    //       .click(function(){
    //         selectedCard = deck[i];
    //         alert("Vc seleciou a : "+selectedCard);
    //       })
    //   });
    // });


    $(document).ready(function () {
      cards.each(function(i, element) {
        $(element)
          .css({"border-style": "solid"})
          .click(function(){
            selectedCard = cards[i].outerHTML;
            alert("Vc seleciou a : "+selectedCard);
          })
      });
    });


    /* Faz o broadcast na rede da corSelecionada */
    function broadcast(){
      socket.emit('color', selectedCard);
    }


    socket.on('color-broadcast', function(card){
      selectedCard = card;
      alert('Chegou a: '+selectedCard)
      // $('body').css({"background": selectedCard});
      rec.append(selectedCard);
      rec.show("slow")
    })



  </script>
</html>
